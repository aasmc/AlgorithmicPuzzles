# E. Скорая помощь

Бригада скорой помощи выехала по вызову в один из отделенных районов. К сожалению, когда диспетчер получил вызов, он успел записать только адрес дома и номер квартиры K1, а затем связь прервалась. Однако он вспомнил, что по этому же адресу дома некоторое время назад скорая помощь выезжала в квартиру K2, которая расположена в подъезда P2 на этаже N2. Известно, что в доме M этажей и количество квартир на каждой лестничной площадке одинаково. Напишите программу, которая вычисляет номер подъезда P1 и номер этажа N1 квартиры K1.

Формат ввода
Во входном файле записаны пять положительных целых чисел K1, M, K2, P2, N2. Все числа не превосходят 106.

Формат вывода
Выведите два числа P1 и N1. Если входные данные не позволяют однозначно определить P1 или N1, вместо соответствующего числа напечатайте 0. Если входные данные противоречивы, напечатайте два числа –1 (минус один).

Пример 1
Ввод	Вывод
89 20 41 1 11
2 3
Пример 2
Ввод	Вывод
11 1 1 1 1
0 1
Пример 3
Ввод	Вывод
3 2 2 2 1
-1 -1

Ниже разберём, в чём состоит основная идея решения и как формально вывести формулы для искомых подъезда и этажа. Затем покажем общий алгоритм, который позволяет корректно обрабатывать все «краевые» случаи: отсутствие решений, неоднозначность и т. д.

---

## Как нумеруются квартиры

По условию, в доме:
- \(M\) этажей в **каждом** подъезде.
- На **каждом** этаже (точнее, на лестничной площадке) одно и то же количество квартир — обозначим его за \(x\).  
  Это число \(x\) нам **неизвестно**, но оно фиксированно для всего дома.

Таким образом, в **каждом** подъезде находится ровно \(M \times x\) квартир. Нумерация идёт последовательно по подъездам, а внутри подъезда — последовательно по этажам (от 1-го до \(M\)-го). То есть:

- Подъезд \(p\) содержит квартиры с номерами:
  \[
  (p-1)\cdot(Mx) + 1,\quad
  (p-1)\cdot(Mx) + 2,\quad \ldots,\quad
  (p-1)\cdot(Mx) + Mx.
  \]
- Причём внутри подъезда этаж \(n\) (нумерация этажей от 1 до \(M\)) содержит квартиры с номерами:
  \[
  (p-1)\cdot(Mx) + (n-1)\cdot x + 1,\quad
  (p-1)\cdot(Mx) + (n-1)\cdot x + 2,\quad \ldots,\quad
  (p-1)\cdot(Mx) + n\cdot x.
  \]

Отсюда выводятся знакомые «формулы обратного перехода» от номера квартиры \(K\) к подъезду \(p\) и этажу \(n\), если задано \(x\):

1.
\[
p \;=\; \Bigl\lfloor \frac{K-1}{\,M x\,}\Bigr\rfloor \;+\; 1.
\]
(Здесь \(\lfloor\cdot\rfloor\) обозначает целочисленное деление «//» в языках программирования, а именно \((K-1)//(M x)\).)

2.
\[
n \;=\; \Bigl\lfloor \frac{(K-1)\bmod(M x)}{\,x\,}\Bigr\rfloor \;+\; 1.
\]
где \((K-1)\bmod(M x)\) — остаток от деления \((K-1)\) на \((M x)\).

### Проблема: \(x\) нам не дано

В задаче \(x\) (количество квартир на этаже) неизвестно. Но при этом **известно**, что:

- Квартира \(K_2\) находится в подъезде \(P_2\), на этаже \(N_2\).
- Это накладывает на \(x\) ограничение, чтобы формулы для \(K_2\) давали ровно \(P_2\) и \(N_2\).

Обычно это записывают так (в терминах целочисленного деления и остатков):

1.
\[
P_2 - 1 \;=\; \Bigl\lfloor \frac{K_2 - 1}{\,M x\,}\Bigr\rfloor.
\]
2.
\[
N_2 - 1 \;=\; \Bigl\lfloor \frac{\bigl((K_2-1)\bmod(M x)\bigr)}{x}\Bigr\rfloor.
\]

Говоря по‑простому, при **каждом** подходящем \(x\) квартира \(K_2\) «оказывается» ровно на этаже \(N_2\) подъезда \(P_2\). Если для заданных \(K_2,\,P_2,\,N_2,\,M\) нет ни одного положительного целого \(x\), удовлетворя этим условиям, — данные противоречивы.

---

## Как найти \(P_1\) и \(N_1\) для квартиры \(K_1\)

После того как мы обнаружили возможное \(x\), для квартиры \(K_1\) вычисляем:

\[
P_1(x) \;=\; \Bigl\lfloor \frac{K_1 - 1}{\,M x\,}\Bigr\rfloor \;+\; 1,
\quad
N_1(x) \;=\; \Bigl\lfloor \frac{(K_1 - 1)\bmod(M x)}{\,x\,}\Bigr\rfloor \;+\; 1.
\]

Но — важно! — \(x\) может быть **не единственным**. Если существуют **разные** положительные \(x_1\) и \(x_2\), при которых квартира \(K_2\) действительно лежит в подъезде \(P_2\) на этаже \(N_2\), то для \(K_1\) мы можем получить:

- Разные значения \(P_1\). Если хотя бы в одном случае \(P_1\neq P_1'\), то итоговый подъезд «неопределён» и мы должны вывести \(0\) вместо номера подъезда.
- Аналогично для этажа \(N_1\): если при разных \(x\) он меняется, надо выводить \(0\).

Если же все подходящие \(x\) дают одно и то же \(P_1\) и одно и то же \(N_1\), мы их и печатаем.

Если же подходящих \(x\) вообще нет, выводим «\(-1\) \(-1\)».

---

## Алгоритм решения

1. **Считать** пять чисел: \(K_1,\;M,\;K_2,\;P_2,\;N_2\).

2. **Найти все положительные \(x\)**, удовлетворя условиям для \(K_2\):
   \[
   \begin{cases}
   \lfloor (K_2 - 1)/(M x)\rfloor = P_2 - 1,\\[6pt]
   \lfloor \bigl((K_2-1)\bmod(M x)\bigr)/x\rfloor = N_2 - 1.
   \end{cases}
   \]
   При этом \(x\) обязательно должен быть \(\ge 1\).

    - Можно сделать «прямой» перебор \(x\) от 1 до какого‑то разумного верхнего предела, например до \(\max( (K_2-1),\,10^6 )\). Обычно в задачах с \(K_2 \le 10^6\) такой перебор (до миллиона) при быстрой проверке на языке C++/Java/Go/Python ещё укладывается во время, если всё написано эффективно. Но если опасаетесь по времени, существуют математические способы сильнее сузить диапазон.
    - В любом случае мы собираем **все** такие \(x\), которые выполняют оба равенства.

3. Если **не нашлось ни одного** \(x\), выводим `-1 -1`.

4. Иначе, для **каждого** подходящего \(x\) вычисляем \(\bigl(P_1(x),\,N_1(x)\bigr)\) по тем же формулам:
   \[
   \begin{aligned}
   &P_1(x) = \lfloor (K_1 - 1)/(M x)\rfloor + 1,\\
   &N_1(x) = \lfloor \bigl((K_1-1)\bmod(M x)\bigr)/x\rfloor + 1.
   \end{aligned}
   \]
    - Если у нас есть несколько значений \(x\), мы получим набор \(\bigl(P_1(x),\,N_1(x)\bigr)\).
    - Если во **всех** случаях \(P_1(x)\) одно и то же, назовём его \(P_1^\ast\); в противном случае \(P_1^\ast = 0\).
    - Аналогично по всем \(x\) для \(N_1^\ast\).

5. Вывести \(P_1^\ast\) и \(N_1^\ast\), где \(P_1^\ast=0\), если подъезд неоднозначен, \(N_1^\ast=0\), если этаж неоднозначен.

---

## Краевые случаи

1. **Противоречие**: не удаётся найти ни одного \(x\) (шаг 3). Это означает, что «по заданным данным невозможно устроить такую нумерацию, чтобы квартира \(K_2\) оказалась именно там, где сказано». Выводим `-1 -1`.

2. **Однозначность**: ровно одно \(x\) или несколько \(x\), но все дают одинаковые \(P_1\) и одинаковые \(N_1\). Выводим эти значения.

3. **Частичная неоднозначность**:
    - Все \(x\) дают один и тот же подъезд, но **разные этажи** → вывод `P_1 0`.
    - Все \(x\) дают один и тот же этаж, но **разные подъезды** → вывод `0 N_1`.
    - И подъезд, и этаж меняются → вывод `0 0`.

4. **Пограничные значения** \(P_2=1\) или \(N_2=1\) (квартира оказывается в самом первом подъезде или на первом этаже). Может случиться так, что часть формул упрощается. Логика остаётся та же, но нужно аккуратно проверять деления/остатки.

---

## Итого

1. С помощью известной формулы (через целочисленное деление и остатки) выписываем условия, которые должны выполняться для \(K_2\) с подъездом \(P_2\) и этажом \(N_2\).
2. Находим **все** \(x\), удовлетворя этим условиям (и \(x > 0\)). Если нет таких \(x\), выводим `-1 -1`.
3. Для каждого подходящего \(x\) находим, куда «упадёт» квартира \(K_1\). Сравниваем полученные \(P_1\), \(N_1\).
4. Если все подъезды одинаковы, выводим этот подъезд, иначе 0. Если все этажи одинаковы, выводим этот этаж, иначе 0.

Так программа корректно учтёт и отсутствие решений, и неоднозначность, и противоречия.